# Generated by Django 3.2.16 on 2023-01-05 00:11

import django.db.models.deletion
import django.utils.timezone
import model_utils.fields
import upload_validator
from django.conf import settings
from django.db import migrations, models

import waldur_core.core.fields
import waldur_core.core.validators
import waldur_core.media.models
import waldur_core.structure.models


class Migration(migrations.Migration):
    replaces = [
        ('marketplace_checklist', '0001_initial'),
        ('marketplace_checklist', '0002_question_solution'),
        ('marketplace_checklist', '0003_add_category_and_correct_answer'),
        ('marketplace_checklist', '0004_i18n_questions_and_checklists'),
        ('marketplace_checklist', '0005_extend_description_limits'),
        ('marketplace_checklist', '0006_answer_project_remove'),
        ('marketplace_checklist', '0007_checklist_customers'),
        ('marketplace_checklist', '0008_answer_remove'),
        ('marketplace_checklist', '0009_category_icon'),
        ('marketplace_checklist', '0010_checklistcustomerrole_checklistprojectrole'),
        ('marketplace_checklist', '0011_question_image'),
        ('marketplace_checklist', '0012_alter_answer_value'),
    ]

    initial = True

    dependencies = [
        ('structure', '0014_remove_customer_type'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
        ('marketplace', '0009_offering_parent'),
    ]

    operations = [
        migrations.CreateModel(
            name='Checklist',
            fields=[
                (
                    'id',
                    models.AutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name='ID',
                    ),
                ),
                (
                    'created',
                    model_utils.fields.AutoCreatedField(
                        default=django.utils.timezone.now,
                        editable=False,
                        verbose_name='created',
                    ),
                ),
                (
                    'modified',
                    model_utils.fields.AutoLastModifiedField(
                        default=django.utils.timezone.now,
                        editable=False,
                        verbose_name='modified',
                    ),
                ),
                (
                    'description',
                    models.CharField(
                        blank=True, max_length=2000, verbose_name='description'
                    ),
                ),
                (
                    'name',
                    models.CharField(
                        max_length=150,
                        validators=[waldur_core.core.validators.validate_name],
                        verbose_name='name',
                    ),
                ),
                ('uuid', waldur_core.core.fields.UUIDField()),
                (
                    'name_en',
                    models.CharField(
                        max_length=150,
                        null=True,
                        validators=[waldur_core.core.validators.validate_name],
                        verbose_name='name',
                    ),
                ),
                (
                    'name_et',
                    models.CharField(
                        max_length=150,
                        null=True,
                        validators=[waldur_core.core.validators.validate_name],
                        verbose_name='name',
                    ),
                ),
                (
                    'description_en',
                    models.CharField(
                        blank=True,
                        max_length=2000,
                        null=True,
                        verbose_name='description',
                    ),
                ),
                (
                    'description_et',
                    models.CharField(
                        blank=True,
                        max_length=2000,
                        null=True,
                        verbose_name='description',
                    ),
                ),
                ('customers', models.ManyToManyField(to='structure.Customer')),
            ],
            options={
                'abstract': False,
                'ordering': ('name',),
            },
        ),
        migrations.CreateModel(
            name='Question',
            fields=[
                (
                    'id',
                    models.AutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name='ID',
                    ),
                ),
                (
                    'description',
                    models.CharField(
                        blank=True, max_length=2000, verbose_name='description'
                    ),
                ),
                ('uuid', waldur_core.core.fields.UUIDField()),
                ('order', models.PositiveIntegerField(default=0)),
                (
                    'category',
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.CASCADE,
                        to='marketplace.category',
                    ),
                ),
                (
                    'checklist',
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name='questions',
                        to='marketplace_checklist.checklist',
                    ),
                ),
                (
                    'solution',
                    models.TextField(
                        blank=True,
                        help_text='It is shown when incorrect or N/A answer is chosen',
                        null=True,
                    ),
                ),
                ('correct_answer', models.BooleanField(default=True)),
                (
                    'description_en',
                    models.CharField(
                        blank=True,
                        max_length=2000,
                        null=True,
                        verbose_name='description',
                    ),
                ),
                (
                    'description_et',
                    models.CharField(
                        blank=True,
                        max_length=2000,
                        null=True,
                        verbose_name='description',
                    ),
                ),
                (
                    'solution_en',
                    models.TextField(
                        blank=True,
                        help_text='It is shown when incorrect or N/A answer is chosen',
                        null=True,
                    ),
                ),
                (
                    'solution_et',
                    models.TextField(
                        blank=True,
                        help_text='It is shown when incorrect or N/A answer is chosen',
                        null=True,
                    ),
                ),
                (
                    'image',
                    models.ImageField(
                        blank=True,
                        null=True,
                        upload_to=waldur_core.media.models.get_upload_path,
                    ),
                ),
            ],
            options={
                'ordering': ('checklist', 'order'),
            },
        ),
        migrations.CreateModel(
            name='Category',
            fields=[
                (
                    'id',
                    models.AutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name='ID',
                    ),
                ),
                (
                    'description',
                    models.CharField(
                        blank=True, max_length=2000, verbose_name='description'
                    ),
                ),
                (
                    'name',
                    models.CharField(
                        max_length=150,
                        validators=[waldur_core.core.validators.validate_name],
                        verbose_name='name',
                    ),
                ),
                ('uuid', waldur_core.core.fields.UUIDField()),
                (
                    'icon',
                    models.FileField(
                        blank=True,
                        null=True,
                        upload_to='marketplace_checklist_category_icons',
                        validators=[
                            upload_validator.FileTypeValidator(
                                allowed_types=[
                                    'image/png',
                                    'image/gif',
                                    'image/jpeg',
                                    'image/svg',
                                    'image/svg+xml',
                                    'image/x-icon',
                                ]
                            )
                        ],
                    ),
                ),
            ],
            options={
                'ordering': ('name',),
                'verbose_name_plural': 'Categories',
            },
        ),
        migrations.AddField(
            model_name='checklist',
            name='category',
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                related_name='checklists',
                to='marketplace_checklist.category',
            ),
        ),
        migrations.CreateModel(
            name='ChecklistProjectRole',
            fields=[
                (
                    'id',
                    models.AutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name='ID',
                    ),
                ),
                (
                    'role',
                    waldur_core.structure.models.ProjectRole(
                        choices=[
                            ('admin', 'Administrator'),
                            ('manager', 'Manager'),
                            ('member', 'Member'),
                        ],
                        max_length=30,
                    ),
                ),
                (
                    'checklist',
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name='project_roles',
                        to='marketplace_checklist.checklist',
                    ),
                ),
            ],
        ),
        migrations.CreateModel(
            name='ChecklistCustomerRole',
            fields=[
                (
                    'id',
                    models.AutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name='ID',
                    ),
                ),
                (
                    'role',
                    waldur_core.structure.models.CustomerRole(
                        choices=[
                            ('owner', 'Owner'),
                            ('support', 'Support'),
                            ('service_manager', 'Service manager'),
                        ],
                        max_length=30,
                    ),
                ),
                (
                    'checklist',
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name='customer_roles',
                        to='marketplace_checklist.checklist',
                    ),
                ),
            ],
        ),
        migrations.CreateModel(
            name='Answer',
            fields=[
                (
                    'id',
                    models.AutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name='ID',
                    ),
                ),
                (
                    'created',
                    model_utils.fields.AutoCreatedField(
                        default=django.utils.timezone.now,
                        editable=False,
                        verbose_name='created',
                    ),
                ),
                (
                    'modified',
                    model_utils.fields.AutoLastModifiedField(
                        default=django.utils.timezone.now,
                        editable=False,
                        verbose_name='modified',
                    ),
                ),
                ('value', models.BooleanField(null=True)),
                (
                    'question',
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        to='marketplace_checklist.question',
                    ),
                ),
                (
                    'user',
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
            ],
            options={
                'abstract': False,
            },
        ),
    ]
